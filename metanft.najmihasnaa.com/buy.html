<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="opula2 - NFT Marketplace Website ">
    <meta name="keywords" content="Html, Css, jQuery, JavaScript, opula2, nft, crypto, template, design">
    <title>opula2 - NFT Product Card</title>
    <link rel="icon" href="images/icon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Michroma:wght@400;500;600;700;800&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&amp;display=swap">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="stylesheet" href="css/main.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
  <style>
        .profile-menu {
            position: relative;
            display: inline-block;
            margin-left: 20px;
        }

        .profile-menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .profile-menu-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: #1a1a1a;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 4px;
        }

        .profile-menu-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .profile-menu-content a:hover {
            background-color: rgba(255,255,255,0.05);
        }

        .profile-menu:hover .profile-menu-content {
            display: block;
        }
    </style><link rel="stylesheet" href="css/colors/theme_color_1.css">
    <style>
        .product-card {
            padding: 40px 0;
        }
        .nft-container {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 24px;
            color: #fff;
        }
        .nft-image-container {
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        .nft-image-container img {
            width: 100%;
            height: auto;
            transition: transform 0.3s ease;
        }
        .nft-image-container:hover img {
            transform: scale(1.05);
        }
        .product-details {
            padding: 24px 0;
        }
        .nft-title {
            font-family: 'Michroma', sans-serif;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 16px;
        }
        .nft-description {
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 24px;
        }
        .creator-section {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }
        .creator-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin-right: 16px;
        }
        .creator-info span {
            display: block;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
        }
        .creator-info h4 {
            font-size: 16px;
            margin-top: 4px;
        }
        .bid-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 24px;
        }
        .bid-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .current-bid {
            font-family: 'Michroma', sans-serif;
            font-size: 24px;
            font-weight: 700;
        }
        .bid-ends {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
        }
        .place-bid-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(124deg,#36454F,#36454F,#36454F);
            border-radius: 12px;
            font-family: 'Michroma', sans-serif;
            font-size: 16px;
            font-weight: 600;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .place-bid-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(247, 3, 97, 0.3);
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="header-inner">
                <div class="logo">
                    <a href="index.html"><img class="img-fluid" src="images/logo2.png" alt=""></a>
                </div>
                <nav class="main-nav">
                    <ul class="menu">
                        <li class="menu-item menu-item-has-children current">
                            <a href="#0">Home</a>
                            <ul class="sub-menu">
                                <li class="menu-item"><a href="index.html">Home 1</a></li>
                                <li class="menu-item current-item"><a href="index-3.html">Home 2</a></li>
                            </ul>
                        </li>
                        <li class="menu-item menu-item-has-children">
                            <a href="#0">About</a>
                            <ul class="sub-menu">
                                <li class="menu-item"><a href="about.html">About</a></li>
                                <li class="menu-item"><a href="team.html">Our Team</a></li>
                                <li class="menu-item"><a href="faq.html">Faq</a></li>
                            </ul>
                        </li>
                        <li class="menu-item menu-item-has-children">
                            <a href="#0">NFT</a>
                            <ul class="sub-menu">
                              <li class="menu-item"><a href="shop.html">Our Shop</a></li>
                                <li class="menu-item"><a href="auction.html.html">Exhibition</a></li>
                                <li class="menu-item"><a href="upload.html">Create</a></li>
                            </ul>
                        </li>
                        <li class="menu-item">
                            <a href="roadmap.html">Road Map</a>
                        </li>
                        <li class="menu-item menu-item-has-children">
                            <a href="#0">Blog</a>
                            <ul class="sub-menu">
                                <li class="menu-item"><a href="blog.html">Blog Grid</a></li>
                                <li class="menu-item"><a href="blog-single.html">Blog Details</a></li>
                            </ul>
                        </li>
                        <li class="menu-item">
                            <a href="contact.html">Contact</a>
                        </li>
                    </ul>
                </nav>
                	<a class="header-btn" href="register.html">Connect</a>
                                    <div class="mobile-button"><span></span></div>
                <div class="profile-menu">
                    <button class="profile-menu-btn"><i class="fa fa-user"></i></button>
                    <div class="profile-menu-content">
   <a href="author.html" > Dashboard</a>
                     <a href="change-password.html" >Change Password</a>
                        <a href="edit-profile.html">Edit Profile</a>
                        <a href="login.html">Logout</a>
                    </div>
            </div>
        </div>
    </header>
<br>
<br>    

    <div class="container product-card">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="nft-container">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="nft-image-container">
                                <img id="nft-image" src="" alt="NFT Image" class="img-fluid">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="product-details">
                                <h1 class="nft-title" id="nft-title"></h1>
                                <p class="nft-description" id="nft-description"></p>
                                
                                <div class="creator-section">
                                    <img src="images/avatars/3.jpg" alt="Creator" class="creator-avatar">
                                    <div class="creator-info">
                                        <span>Creator</span>
                                        <h4></h4>
                                    </div>
                                </div>

                                <div class="bid-section">
                                    <div class="bid-header">
                                        <div>
                                            <span class="bid-ends">Price</span>
                                            <div class="current-bid"></div>
                                        </div>
                                        <!-- <div>
                                            <span class="bid-ends">Ends in</span>
                                            <div class="current-bid">23h 50m</div>
                                        </div> -->
                                    </div>
                                    <button class="place-bid-btn">Buy</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


<div class="col-lg-10 mx-auto mt-5">
    <div class="nft-container">
        <h3 class="text-white mb-4">More from this Artist</h3>
        <div id="artistCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <!-- Carousel items will be dynamically added here -->
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#artistCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#artistCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</div>

<style>
.carousel-item img {
    width: 100%;
    height: 300px;
    object-fit: cover;
    border-radius: 12px;
}

.carousel-control-prev,
.carousel-control-next {
    width: 5%;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    height: 40px;
    width: 40px;
    top: 50%;
    transform: translateY(-50%);
}

.carousel-control-prev {
    left: -50px;
}

.carousel-control-next {
    right: -50px;
}
</style>

<script>
    $(document).ready(async function () {

                    var user=localStorage.getItem("user")
                    if (!user){

                        location.href="login.html"

}
                    })
                 
// Sample artist artwork data (replace with actual data)
const userart=JSON.parse(localStorage.getItem("user"))
const artistArtworks=userart.artWorks

// Populate carousel with artist's artwork
window.addEventListener('DOMContentLoaded', function() {
    const carouselInner = document.querySelector('.carousel-inner');
    
    artistArtworks.forEach((artwork, index) => {
        const carouselItem = document.createElement('div');
        carouselItem.className = `carousel-item ${index === 0 ? 'active' : ''}`;
        
        carouselItem.innerHTML = `
            <div style="cursor: pointer;" onclick="handleArtworkClick(${JSON.stringify(artwork).replace(/"/g, '&quot;')})">
                <img src="${artwork.image}" class="d-block" alt="${artwork.title}">
                <div class="carousel-caption">
                    <h5 class="text-white">${artwork.title}</h5>
                </div>
            </div>
        `;
        
        carouselInner.appendChild(carouselItem);
    });
});

function handleArtworkClick(artwork) {
    localStorage.setItem('nftCard', JSON.stringify({
        image: artwork.image,
        title: artwork.title,
        description: artwork.description,
        creator: artwork.creator,
        creatorAvatar: artwork.creatorAvatar || 'images/avatars/3.jpg',
        currentBid: artwork.price,
        _id: artwork._id
    }));
    window.location.href = 'buy.html';
}
</script>

<!-- ========== Start Footer ========== -->
        
<footer class="footer">
    <div class="footer-top">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-sm-6 col-12 footer-menu">
                    <div class="footer-logo">
                        <a class="my-logo" href="index.html"><img class="img-fluid" src="images/logo2.png" alt=""></a>
                    </div>
                    <p>Discover, collect, and sell unique digital assets on our NFT marketplace. Empowering creators and connecting collectors through blockchain technology.</p>
                </div>
                <div class="col-lg-2 col-sm-6 col-12 footer-menu">
                    <div class="footer-item">
                        <h4>Site map</h4>
                        <ul class="list-unstyled">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="about.html">About us</a></li>
                            <li><a href="roadmap.html">Roadmap</a></li>
                            <li><a href="team.html">Our Team</a></li>
                            <li><a href="faq.html">FAQ</a></li>
                            <li><a href="blog.html">Articles</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-sm-6 col-12 footer-menu">
                    <div class="footer-item">
                        <h4>Company</h4>
                        <ul class="list-unstyled">
                            <li><a href="#0">Help & Support</a></li>
                            <li><a href="#0">Terms Canditions</a></li>
                            <li><a href="#0">Privacy Policy</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12 footer-menu">
                    <div class="footer-item">
                        <h4>Subscribe Newsletter</h4>
                        <div class="footer-newsletter">
                            <input type="text" name="text" placeholder="Email address" required="">
                            <a class="submit" href="#0"><i class="fa fa-send"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-bottom text-center">
        <div class="container">
            <div class="copyright d-flex align-items-center justify-content-md-between flex-sm-wrap justify-content-sm-center">
                <p>Copyright &copy; 2022, <span>opula2</span> All Rights Reserved.</p>
                <ul class="list-unstyled social-media d-flex align-items-center">
                    <li><a href="#0"><i class="fa fa-facebook"></i></a></li>
                    <li><a href="#0"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="#0"><i class="fa fa-instagram"></i></a></li>
                    <li><a href="#0"><i class="fa fa-linkedin"></i></a></li>
                    <li><a href="#0"><i class="fa fa-behance"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<!-- ========== End Footer ========== -->

<!-- ========== Start Scroll To Top  ========== -->

<a href="#0" class="scroll-top">
    <span><i class="fa fa-arrow-up"></i></span>
</a>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/custom.js"></script>
    <script>
        // Load NFT details from localStorage when the page loads
        async function purchase(artworkId, artworkName, bidAmount, bidderName, bidDetails, bidderId, timestamp) {
    console.log(artworkId);
    
            try {
        const response = await fetch("https://new-slime.onrender.com/transactions/id/confirm", {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                artworkId,
                artworkName,
                bidAmount,
                bidderName,
                bidDetails,
                bidderId,
                timestamp
            })
        });

        // Check if the response is not OK
        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.message || "Transaction failed");
        }

        const data = await response.json();
        console.log("Purchase Successful:", data.message);
        Swal.fire({
                title: 'Artwork Purchased!',
                text: 'Congratulations!',
                icon: 'success',
                background: '#1a1a1a',
                color: '#fff',
                confirmButtonColor: '#36454F'
            }),
            location.href="author.html"

            
        return data;
    } catch (error) {
        console.error("Purchase Error:", error.message);
        throw error;
    }
}

        window.addEventListener('DOMContentLoaded', function () {
    const nftData = JSON.parse(localStorage.getItem('nftCard'));

    if (nftData) {
        document.getElementById('nft-image').src = nftData.image;
        document.getElementById('nft-title').textContent = nftData.title;
        document.getElementById('nft-description').textContent = nftData.description;
        document.querySelector('.creator-info h4').textContent = nftData.creator;
        document.querySelector('.creator-avatar').src = nftData.creatorAvatar;
        document.querySelector('.current-bid').textContent = nftData.currentBid;
    } else {
        window.location.href = 'index.html';
    }
});

// Place bid button click handler
document.querySelector('.place-bid-btn').addEventListener('click', async function () {
    try {
        const currentBid = parseFloat(document.querySelector('.current-bid').textContent);
        const artworkName = document.getElementById('nft-title').textContent;
        const creatorName = document.querySelector('.creator-info h4').textContent;
        const nftData = JSON.parse(localStorage.getItem('nftCard'));

        const artworkId = nftData._id;
        const user = localStorage.getItem("user");
        const parseUser = JSON.parse(user);
        const bidderName = parseUser.username;
        const bidderId = parseUser._id;
        const userBalance = parseFloat(parseUser.balance);

        // Check if user balance is less than the current bid
        if (userBalance < currentBid) {
            Swal.fire({
                title: 'Insufficient Balance',
                text: 'Your balance is less than the current bid amount.',
                icon: 'warning',
                background: '#1a1a1a',
                color: '#fff',
                confirmButtonColor: '#36454F'
            });
            return;
        }

        const { value: bidAmount, isConfirmed } = await Swal.fire({
            title: 'Place Your Bid',
            html: `<p style="color: #666">Current Price is $${currentBid}</p>`,
            input: 'number',
            inputAttributes: {
                min: currentBid + 0.1,
                step: '0.1'
            },
            inputValue: currentBid + 0.1,
            showCancelButton: true,
            confirmButtonText: 'Buy',
            cancelButtonText: 'Cancel',
            background: '#1a1a1a',
            color: '#fff',
            confirmButtonColor: '#36454F',
            cancelButtonColor: '#333',
            customClass: {
                input: 'swal2-input custom-input'
            },
            didOpen: () => {
                const input = Swal.getInput();
                input.style.backgroundColor = '#333';
                input.style.color = '#fff';
                input.style.border = '1px solid #444';
                input.style.borderRadius = '8px';
                input.style.padding = '12px';
            }
        });

        if (isConfirmed) {
            // Check if bid amount is less than the current bid
            if (parseFloat(bidAmount) < currentBid) {
                Swal.fire({
                    title: 'Invalid Bid',
                    text: 'Bid amount must be greater than the current bid.',
                    icon: 'warning',
                    background: '#1a1a1a',
                    color: '#fff',
                    confirmButtonColor: '#36454F'
                });
                return;
            }

            const bidDetails = {
                artworkId: artworkId,
                artworkName: artworkName,
                bidAmount: bidAmount,
                creatorName: creatorName,
                bidderName: bidderName,
                bidderId: bidderId,
                timestamp: new Date().toISOString(),
                previousBid: currentBid
            };

            console.log('New Bid Details:', bidDetails);
            await purchase(artworkId, artworkName, bidAmount, bidderName, bidDetails, bidderId);
        }
    } catch (error) {
        console.error('Error during bid placement:', error);
        Swal.fire({
            title: 'Error',
            text: 'An error occurred while placing your bid. Please try again.',
            icon: 'error',
            background: '#1a1a1a',
            color: '#fff',
            confirmButtonColor: '#36454F'
        });
    }
});
    </script>
<div class="gtranslate_wrapper"></div>
<script>window.gtranslateSettings = {"default_language":"en","native_language_names":true,"detect_browser_language":true,"languages":["en","fr","it","es","de","gd","zh-TW","ja","ru","pt","tr"],"wrapper_selector":".gtranslate_wrapper","alt_flags":{"en":"usa","pt":"brazil","es":"mexico"}}</script>
<script src="https://cdn.gtranslate.net/widgets/latest/float.js" defer></script>

<noscript> Powered by <a href=“https://www.smartsupp.com” target=“_blank”>Smartsupp</a></noscript>
</body>
</html>